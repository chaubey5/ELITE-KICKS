{% extends 'shoes/base.html' %}
{% block content %}

<div class="shop-container">
    <div class="shop-header animate-fade">
        <h1 class="shop-title">THE <span class="neon-text">VAULT</span></h1>
        <p class="results-count">{{ shoes|length }} Items Available</p>
    </div>

    <div class="shop-layout">
        <aside class="filter-sidebar">
            <div class="filter-box-contained">
                <div class="filter-section">
                    <h4 class="section-title">CATEGORIES</h4>
                    <div class="filter-group">
                        <a href="{% url 'shop' %}" class="chip {% if not selected_category %}active{% endif %}">All</a>
                        {% for cat in categories %}
                        <a href="{% url 'shop' %}?category={{ cat.name }}" class="chip {% if selected_category == cat.name %}active{% endif %}">
                            {{ cat.name }}
                        </a>
                        {% endfor %}
                    </div>
                </div>

                <div class="filter-section mt-30">
                    <h4 class="section-title">BRANDS</h4>
                    <div class="filter-group">
                        {% for brand in brands %}
                        <a href="{% url 'shop' %}?brand={{ brand.name }}" class="chip {% if selected_brand == brand.name %}active{% endif %}">
                            {{ brand.name }}
                        </a>
                        {% endfor %}
                    </div>
                </div>

                {% if selected_category or selected_brand %}
                <a href="{% url 'shop' %}" class="btn-reset">RESET FILTERS</a>
                {% endif %}
            </div>
        </aside>

        <main class="product-display">
            <div class="shoe-grid">
                {% for shoe in shoes %}
                <div class="shoe-card">
                    <div class="image-wrapper">
                        <div class="circle-bg"></div>
                        <img src="{{ shoe.image.url }}" alt="{{ shoe.name }}" class="shoe-img-straight">
                        <div class="overlay-btns">
                            <a href="{% url 'shoe_detail' shoe.id %}" class="quick-view">VIEW DETAILS</a>
                        </div>
                    </div>
                    
                    <div class="shoe-details">
                        <h3 class="name-text">{{ shoe.name }}</h3>
                        <div class="price-row">
                            <span class="brand-label">{{ shoe.brand.name }}</span>
                            <span class="price-val">${{ shoe.price }}</span>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </main>
    </div>
</div>

<style>
    :root { --neon: #00d4ff; --bg-dark: #0a0a0a; --card-bg: #111; }

    body { background-color: #050505; color: #fff; font-family: 'Inter', sans-serif; }
    .shop-container { max-width: 1400px; margin: 50px auto; padding: 0 20px; }
    .shop-layout { display: grid; grid-template-columns: 260px 1fr; gap: 40px; }

    /* # Filter Container Styling */
    .filter-box-contained { 
        background: var(--card-bg); 
        padding: 25px; 
        border-radius: 20px; 
        border: 1px solid #222;
        position: sticky; 
        top: 20px;
    }
    .section-title { font-size: 11px; letter-spacing: 2px; color: #555; margin-bottom: 15px; font-weight: 800; }
    .filter-group { display: flex; flex-wrap: wrap; gap: 10px; }
    .chip { 
        padding: 8px 15px; background: #000; border: 1px solid #333; 
        border-radius: 10px; color: #888; text-decoration: none; font-size: 13px; transition: 0.3s;
    }
    .chip:hover, .chip.active { border-color: var(--neon); color: var(--neon); background: rgba(0, 212, 255, 0.05); }
    .btn-reset { display: block; text-align: center; margin-top: 25px; color: #ff4d4d; font-size: 12px; font-weight: 700; text-decoration: none; }

    /* # Shoe Card Styling */
    .shoe-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 30px; }
    .shoe-card { background: var(--card-bg); border-radius: 25px; overflow: hidden; transition: 0.3s; border: 1px solid #222; }
    .shoe-card:hover { border-color: #444; transform: translateY(-5px); }

    /* # Straight Image & Circle Background */
    .image-wrapper { 
        height: 220px; position: relative; 
        display: flex; align-items: center; justify-content: center; 
        background: #000; overflow: hidden;
    }
    .circle-bg { 
        position: absolute; width: 150px; height: 150px; 
        background: radial-gradient(circle, rgba(0, 212, 255, 0.15) 0%, rgba(0,0,0,0) 70%); 
        border-radius: 50%; z-index: 1;
    }
    .shoe-img-straight { 
        width: 80%; z-index: 2; transition: 0.4s; 
        filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5));
    }
    .shoe-card:hover .shoe-img-straight { scale: 1.1; }

    /* # Details */
    .shoe-details { padding: 20px; }
    .name-text { font-size: 1.1rem; font-weight: 700; margin-bottom: 10px; color: #fff; }
    .price-row { display: flex; justify-content: space-between; align-items: center; }
    .brand-label { font-size: 10px; color: #555; text-transform: uppercase; font-weight: 800; }
    .price-val { color: var(--neon); font-weight: 900; }

    /* Overlay View Button */
    .overlay-btns { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.5); opacity: 0; transition: 0.3s; z-index: 3; }
    .shoe-card:hover .overlay-btns { opacity: 1; }
    .quick-view { background: #fff; color: #000; padding: 10px 20px; border-radius: 10px; font-weight: 900; font-size: 12px; text-decoration: none; }

    .mt-30 { margin-top: 30px; }
</style>

{% endblock %}